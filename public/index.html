<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title>Tap or Tarp</title>
    <link rel="icon" type="image/svg+xml" href="logo.svg" />
    <link rel="manifest" href="manifest.json" />
    <link rel="apple-touch-icon" href="/icons/icon-192.png" />
    <meta name="theme-color" content="#4a5d23" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <!-- Main Menu Screen -->
      <div id="main-menu-screen">
        <h1>Tap or Tarp</h1>
        <div class="menu-container">
          <button id="menu-casual-btn" class="btn btn-menu">Start New Casual Game</button>
          <button id="menu-campaign-btn" class="btn btn-menu">Start New Campaign</button>
          <button id="menu-join-btn" class="btn btn-menu">Join Game</button>
          <button id="menu-load-btn" class="btn btn-menu">Load Game</button>
          <button id="menu-settings-btn" class="btn btn-menu">Settings</button>
          <button id="menu-feedback-btn" class="btn btn-menu">Feedback</button>
        </div>
      </div>

      <!-- Casual Game Setup Screen -->
      <div id="casual-setup-screen" style="display: none">
        <h1>New Casual Game</h1>
        <div class="setup-form">
          <div class="form-group">
            <label for="game-name">Game Name</label>
            <input
              type="text"
              id="game-name"
              placeholder="Enter game name (optional)"
              maxlength="50"
            />
          </div>
          <div class="form-group">
            <label for="player-count">Number of Players (2-8)</label>
            <input type="number" id="player-count" min="2" max="8" value="2" />
          </div>
          <div class="form-group">
            <label for="initial-time">Starting Time (minutes)</label>
            <input type="number" id="initial-time" min="1" value="10" />
          </div>
          <div class="menu-actions">
            <button id="create-game" class="btn btn-primary" aria-label="Create new game">
              Create Game
            </button>
            <button id="casual-back-btn" class="btn btn-secondary" aria-label="Back to menu">
              Back
            </button>
          </div>
        </div>
      </div>

      <!-- Join Game Screen -->
      <div id="join-screen" style="display: none">
        <h1>Join Game</h1>
        <div class="setup-form">
          <div class="form-group">
            <label>Active Lobbies</label>
            <div id="game-list" class="game-list">
              <p class="loading">Loading games...</p>
            </div>
            <p class="form-hint">Tap a game to join</p>
          </div>
          <div class="form-group-divider">
            <span>OR</span>
          </div>
          <div class="form-group">
            <label for="join-game">Enter Game Code</label>
            <input type="text" id="join-game" placeholder="e.g. ABC123" maxlength="6" />
          </div>
          <div class="menu-actions">
            <button id="join-btn" class="btn btn-primary" aria-label="Join game">Join</button>
            <button id="join-back-btn" class="btn btn-secondary" aria-label="Back to menu">
              Back
            </button>
          </div>
        </div>
      </div>

      <!-- Campaign Screen (Placeholder) -->
      <div id="campaign-screen" style="display: none">
        <h1>Campaign Mode</h1>
        <div class="placeholder-content">
          <p>Campaign mode coming soon!</p>
          <button id="campaign-back-btn" class="btn btn-secondary" aria-label="Back to menu">
            Back to Menu
          </button>
        </div>
      </div>

      <!-- Load Game Screen (Placeholder) -->
      <div id="load-screen" style="display: none">
        <h1>Load Game</h1>
        <div class="placeholder-content">
          <p>No saved games found.</p>
          <button id="load-back-btn" class="btn btn-secondary" aria-label="Back to menu">
            Back to Menu
          </button>
        </div>
      </div>

      <!-- Menu Settings Screen -->
      <div id="menu-settings-screen" style="display: none">
        <h1>Settings</h1>
        <div class="setup-form">
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="menu-mute-checkbox" />
              Mute Audio
            </label>
          </div>
          <div class="menu-actions">
            <button id="menu-settings-save-btn" class="btn btn-primary" aria-label="Save settings">
              Save
            </button>
            <button id="menu-settings-back-btn" class="btn btn-secondary" aria-label="Back to menu">
              Back
            </button>
          </div>
        </div>
      </div>

      <!-- Feedback Screen -->
      <div id="feedback-screen" style="display: none">
        <h1>Feedback</h1>
        <div id="feedback-form-section" class="setup-form">
          <div class="form-group">
            <label for="feedback-text">Your Feedback</label>
            <textarea
              id="feedback-text"
              class="feedback-textarea"
              maxlength="255"
              placeholder="Share your thoughts, suggestions, or report issues..."
              rows="5"
            ></textarea>
            <p class="form-hint"><span id="feedback-char-count">0</span>/255 characters</p>
          </div>
          <div class="menu-actions">
            <button id="feedback-submit-btn" class="btn btn-primary" aria-label="Submit feedback">
              Submit Feedback
            </button>
            <button
              id="feedback-view-btn"
              class="btn btn-secondary"
              aria-label="View saved feedback"
            >
              View Feedback
            </button>
            <button id="feedback-back-btn" class="btn btn-secondary" aria-label="Back to menu">
              Back
            </button>
          </div>
        </div>

        <div id="feedback-list-section" style="display: none">
          <h2>Your Feedback</h2>
          <div id="feedback-list" class="feedback-list"></div>
          <div class="menu-actions">
            <button id="feedback-add-btn" class="btn btn-primary" aria-label="Add new feedback">
              Add New Feedback
            </button>
            <button id="feedback-list-back-btn" class="btn btn-secondary" aria-label="Back to menu">
              Back
            </button>
          </div>
        </div>
      </div>

      <div id="game-screen" style="display: none">
        <div class="game-header">
          <div class="game-header-left">
            <h1 id="game-title-display">Tap or Tarp</h1>
            <div class="game-code">Game Code: <span id="game-code-display"></span></div>
          </div>
        </div>

        <div id="players-container"></div>

        <div class="controls">
          <button
            id="start-btn"
            class="btn btn-control btn-primary"
            style="display: none"
            aria-label="Start game"
          >
            Start Game
          </button>
          <button id="pass-turn-btn" class="btn btn-control" aria-label="Pass turn to next player">
            Pass Turn
          </button>
          <button
            id="interrupt-btn"
            class="btn btn-control"
            aria-label="Interrupt turn"
            style="display: none"
          >
            Interrupt
          </button>
          <button id="pause-btn" class="btn btn-control" aria-label="Pause or resume game">
            Pause
          </button>
          <button id="reset-btn" class="btn btn-control" aria-label="Reset game">Reset</button>
          <button id="settings-btn" class="btn btn-control" aria-label="Open settings">
            Settings
          </button>
          <button id="back-to-menu-btn" class="btn btn-control" aria-label="Return to main menu">
            Back to Menu
          </button>
        </div>
      </div>

      <!-- Mobile Game Screen (New Redesigned Layout) -->
      <div id="mobile-game-screen" class="mobile-layout" style="display: none">
        <header class="mobile-top-bar">
          <button class="mobile-icon-btn mobile-exit-btn" aria-label="Exit to menu">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
          </button>
          <button class="mobile-icon-btn mobile-settings-btn" aria-label="Open settings">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"/>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
            </svg>
          </button>
        </header>

        <section class="mobile-time-display">
          <div class="mobile-turn-indicator">YOUR TURN</div>
          <div class="mobile-time-value">05:23</div>
        </section>

        <section class="mobile-interaction-area">
          <button class="mobile-interaction-btn mobile-interaction-btn-pass" aria-label="Pass turn">
            PASS TURN
          </button>
        </section>

        <section class="mobile-other-players">
          <div class="mobile-player-cards">
            <!-- Player cards will be inserted here dynamically -->
            <div class="mobile-player-card" data-placeholder="true">
              <span class="mobile-player-card-name">Player 2</span>
              <span class="mobile-player-card-life">40</span>
            </div>
            <div class="mobile-player-card" data-placeholder="true">
              <span class="mobile-player-card-name">Player 3</span>
              <span class="mobile-player-card-life">38</span>
            </div>
            <div class="mobile-player-card" data-placeholder="true">
              <span class="mobile-player-card-name">Player 4</span>
              <span class="mobile-player-card-life">40</span>
            </div>
          </div>
        </section>

        <footer class="mobile-player-stats">
          <div class="mobile-stat-group mobile-stat-life">
            <span class="mobile-stat-icon">&#10084;</span>
            <span class="mobile-stat-value">40</span>
            <div class="mobile-stat-controls">
              <button class="mobile-stat-btn" aria-label="Decrease life">-</button>
              <button class="mobile-stat-btn" aria-label="Increase life">+</button>
            </div>
          </div>
          <div class="mobile-stat-group mobile-stat-poison">
            <span class="mobile-stat-icon">&#127866;</span>
            <span class="mobile-stat-value">0</span>
            <div class="mobile-stat-controls">
              <button class="mobile-stat-btn" aria-label="Decrease counter">-</button>
              <button class="mobile-stat-btn" aria-label="Increase counter">+</button>
            </div>
          </div>
          <div class="mobile-stat-group mobile-stat-generic">
            <span class="mobile-stat-icon">&#11088;</span>
            <span class="mobile-stat-value">0</span>
            <div class="mobile-stat-controls">
              <button class="mobile-stat-btn" aria-label="Decrease counter">-</button>
              <button class="mobile-stat-btn" aria-label="Increase counter">+</button>
            </div>
          </div>
        </footer>
      </div>

      <div id="settings-modal" style="display: none" class="modal">
        <div class="modal-content">
          <h2>Game Settings</h2>

          <div class="form-group">
            <label>Game Code</label>
            <div class="game-code-display" id="settings-game-code"></div>
          </div>

          <div class="form-group">
            <label>Warning Thresholds</label>
            <p class="form-hint">Audio alerts when time remaining drops below these values</p>
            <div id="thresholds-container" class="thresholds-container">
              <div class="threshold-item" data-index="0">
                <input type="number" class="threshold-input" value="5" min="0.1" step="0.5" />
                <span class="threshold-unit">min</span>
                <button type="button" class="btn-threshold-remove" aria-label="Remove threshold">
                  &times;
                </button>
              </div>
              <div class="threshold-item" data-index="1">
                <input type="number" class="threshold-input" value="1" min="0.1" step="0.5" />
                <span class="threshold-unit">min</span>
                <button type="button" class="btn-threshold-remove" aria-label="Remove threshold">
                  &times;
                </button>
              </div>
              <div class="threshold-item" data-index="2">
                <input type="number" class="threshold-input" value="0.5" min="0.1" step="0.1" />
                <span class="threshold-unit">min</span>
                <button type="button" class="btn-threshold-remove" aria-label="Remove threshold">
                  &times;
                </button>
              </div>
            </div>
            <button type="button" id="add-threshold-btn" class="btn btn-small btn-secondary">
              + Add Threshold
            </button>
          </div>

          <div class="form-group">
            <label>Your Color</label>
            <p class="form-hint">Customize your player card color</p>
            <div id="player-colors-container" class="player-colors-container"></div>
          </div>

          <div class="form-group">
            <label for="game-name-input">Rename Game</label>
            <input
              type="text"
              id="game-name-input"
              placeholder="Enter new game name (optional)"
              maxlength="50"
            />
            <p class="form-hint">Leave empty to keep current name</p>
          </div>

          <div class="form-group form-group-danger">
            <label>Danger Zone</label>
            <button type="button" id="close-lobby-btn" class="btn btn-small btn-danger">
              Close Lobby
            </button>
            <p class="form-hint">This will end the game for all players and close the lobby.</p>
          </div>

          <div class="modal-actions">
            <button id="save-settings" class="btn btn-primary" aria-label="Save settings">
              Save
            </button>
            <button id="close-settings" class="btn btn-secondary" aria-label="Close settings">
              Cancel
            </button>
          </div>
        </div>
      </div>

      <div id="color-picker-modal" style="display: none" class="modal">
        <div class="modal-content modal-small">
          <h3>Choose Color</h3>
          <div id="color-options" class="color-options"></div>
          <div class="modal-actions">
            <button id="cancel-color-picker" class="btn btn-secondary">Cancel</button>
          </div>
        </div>
      </div>

      <div id="timeout-modal" style="display: none" class="modal">
        <div class="modal-content modal-danger">
          <h2>TIMEOUT!</h2>
          <p id="timeout-message"></p>
          <button id="acknowledge-timeout" class="btn btn-primary" aria-label="Acknowledge timeout">
            Acknowledge
          </button>
        </div>
      </div>
    </div>

    <script src="constants.js"></script>
    <script src="client.js"></script>
  </body>
</html>
