<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title>Tap or Tarp</title>
    <link rel="icon" type="image/svg+xml" href="logo.svg" />
    <link rel="manifest" href="manifest.json" />
    <link rel="apple-touch-icon" href="/icons/icon-192.png" />
    <meta name="theme-color" content="#0c0c12" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Connection status indicator -->
    <div id="connection-status" class="connection-status hidden">
      <span class="connection-dot"></span>
      <span class="connection-text">Connecting...</span>
    </div>
    <div id="app">
      <!-- Main Menu Screen -->
      <div id="main-menu-screen">
        <h1>Tap or Tarp</h1>
        <div class="menu-container">
          <button id="menu-casual-btn" class="btn btn-menu">Start New Casual Game</button>
          <button id="menu-campaign-btn" class="btn btn-menu">Start New Campaign</button>
          <button id="menu-join-btn" class="btn btn-menu">Join Game</button>
          <button id="menu-load-btn" class="btn btn-menu">Load Game</button>
          <button id="menu-settings-btn" class="btn btn-menu">Settings</button>
          <button id="menu-feedback-btn" class="btn btn-menu">Feedback</button>
        </div>
      </div>

      <!-- Casual Game Setup Screen -->
      <div id="casual-setup-screen" style="display: none">
        <h1>New Casual Game</h1>
        <div class="setup-form">
          <div class="form-group">
            <label for="game-name">Game Name</label>
            <input
              type="text"
              id="game-name"
              placeholder="Enter game name (optional)"
              maxlength="50"
            />
          </div>
          <div class="form-group">
            <label for="player-count">Number of Players (2-8)</label>
            <input type="number" id="player-count" min="2" max="8" value="2" />
          </div>
          <div class="form-group">
            <label for="initial-time">Starting Time (minutes)</label>
            <input type="number" id="initial-time" min="1" value="10" />
          </div>
          <div class="menu-actions">
            <button id="create-game" class="btn btn-primary" aria-label="Create new game">
              Create Game
            </button>
            <button id="casual-back-btn" class="btn btn-secondary" aria-label="Back to menu">
              Back
            </button>
          </div>
        </div>
      </div>

      <!-- Join Game Screen -->
      <div id="join-screen" style="display: none">
        <h1>Join Game</h1>
        <div class="setup-form">
          <div class="form-group">
            <label>Active Lobbies</label>
            <div id="game-list" class="game-list">
              <p class="loading">Loading games...</p>
            </div>
            <p class="form-hint">Tap a game to join</p>
          </div>
          <div class="form-group-divider">
            <span>OR</span>
          </div>
          <div class="form-group">
            <label for="join-game">Enter Game Code</label>
            <input type="text" id="join-game" placeholder="e.g. ABC123" maxlength="6" />
          </div>
          <div class="menu-actions">
            <button id="join-btn" class="btn btn-primary" aria-label="Join game">Join</button>
            <button id="join-back-btn" class="btn btn-secondary" aria-label="Back to menu">
              Back
            </button>
          </div>
        </div>
      </div>

      <!-- Campaign Screen -->
      <div id="campaign-screen" style="display: none">
        <h1>New Campaign</h1>
        <div class="setup-form">
          <div class="form-group">
            <label for="campaign-preset">Campaign Preset</label>
            <div class="preset-select-row">
              <select id="campaign-preset">
                <option value="wastelands">The Wastelands</option>
              </select>
              <button id="campaign-preset-info-btn" class="preset-info-btn" aria-label="Campaign info">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                  <circle cx="12" cy="12" r="10"/>
                  <line x1="12" y1="16" x2="12" y2="12"/>
                  <line x1="12" y1="8" x2="12.01" y2="8"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="form-group">
            <label for="campaign-player-count">Number of Players (2-8)</label>
            <input type="number" id="campaign-player-count" min="2" max="8" value="2" />
          </div>
          <div class="form-group">
            <label for="campaign-game-name">Game Name</label>
            <input
              type="text"
              id="campaign-game-name"
              placeholder="Enter game name (optional)"
              maxlength="50"
            />
          </div>
          <div class="menu-actions">
            <button id="create-campaign" class="btn btn-primary" aria-label="Create new campaign">
              Create Campaign
            </button>
            <button id="campaign-back-btn" class="btn btn-secondary" aria-label="Back to menu">
              Back
            </button>
          </div>
        </div>
      </div>

      <!-- Load Game Screen (Placeholder) -->
      <div id="load-screen" style="display: none">
        <h1>Load Game</h1>
        <div class="placeholder-content">
          <p>No saved games found.</p>
          <button id="load-back-btn" class="btn btn-secondary" aria-label="Back to menu">
            Back to Menu
          </button>
        </div>
      </div>

      <!-- Menu Settings Screen -->
      <div id="menu-settings-screen" style="display: none">
        <h1>Settings</h1>
        <div class="setup-form">
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="menu-mute-checkbox" />
              Mute Audio
            </label>
          </div>
          <div class="menu-actions">
            <button id="menu-settings-save-btn" class="btn btn-primary" aria-label="Save settings">
              Save
            </button>
            <button id="menu-settings-back-btn" class="btn btn-secondary" aria-label="Back to menu">
              Back
            </button>
          </div>
        </div>
      </div>

      <!-- Feedback Screen -->
      <div id="feedback-screen" style="display: none">
        <h1>Feedback</h1>
        <div id="feedback-form-section" class="setup-form">
          <div class="form-group">
            <label for="feedback-text">Your Feedback</label>
            <textarea
              id="feedback-text"
              class="feedback-textarea"
              maxlength="255"
              placeholder="Share your thoughts, suggestions, or report issues..."
              rows="5"
            ></textarea>
            <p class="form-hint"><span id="feedback-char-count">0</span>/255 characters</p>
          </div>
          <div class="menu-actions">
            <button id="feedback-submit-btn" class="btn btn-primary" aria-label="Submit feedback">
              Submit Feedback
            </button>
            <button
              id="feedback-view-btn"
              class="btn btn-secondary"
              aria-label="View saved feedback"
            >
              View Feedback
            </button>
            <button id="feedback-back-btn" class="btn btn-secondary" aria-label="Back to menu">
              Back
            </button>
          </div>
        </div>

        <div id="feedback-list-section" style="display: none">
          <h2>Your Feedback</h2>
          <div id="feedback-list" class="feedback-list"></div>
          <div class="menu-actions">
            <button id="feedback-add-btn" class="btn btn-primary" aria-label="Add new feedback">
              Add New Feedback
            </button>
            <button id="feedback-list-back-btn" class="btn btn-secondary" aria-label="Back to menu">
              Back
            </button>
          </div>
        </div>
      </div>

      <!-- Game Screen (Unified Layout) -->
      <div id="game-screen" class="game-layout" style="display: none" role="main" aria-label="Game screen">
        <header class="game-top-bar" role="banner">
          <button class="game-icon-btn game-exit-btn" aria-label="Exit to main menu">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
          </button>
          <button class="game-icon-btn game-dice-btn" aria-label="Roll dice">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <rect x="3" y="3" width="18" height="18" rx="2"/>
              <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor" stroke="none"/>
              <circle cx="15.5" cy="8.5" r="1.5" fill="currentColor" stroke="none"/>
              <circle cx="8.5" cy="15.5" r="1.5" fill="currentColor" stroke="none"/>
              <circle cx="15.5" cy="15.5" r="1.5" fill="currentColor" stroke="none"/>
              <circle cx="12" cy="12" r="1.5" fill="currentColor" stroke="none"/>
            </svg>
          </button>
          <button class="game-icon-btn game-play-order-btn" style="display: none" aria-label="Roll for play order">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <line x1="4" y1="6" x2="14" y2="6"/>
              <line x1="4" y1="12" x2="17" y2="12"/>
              <line x1="4" y1="18" x2="11" y2="18"/>
              <path d="M18 15l3 3-3 3" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M18 9l3-3-3-3" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="game-icon-btn game-info-btn" aria-label="Campaign info" style="display: none">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="16" x2="12" y2="12"/>
              <line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
          </button>
          <button class="game-icon-btn game-settings-btn" aria-label="Open game settings">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <circle cx="12" cy="12" r="3"/>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
            </svg>
          </button>
          <button class="game-icon-btn game-pause-btn" aria-label="Pause game" style="display: none">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <rect x="6" y="4" width="4" height="16" rx="1" />
              <rect x="14" y="4" width="4" height="16" rx="1" />
            </svg>
          </button>
        </header>

        <section class="game-time-display" aria-label="Game status">
          <div class="game-turn-indicator" role="status" aria-live="polite">YOUR TURN</div>
          <div class="game-time-value" role="timer" aria-live="off" aria-atomic="true">05:23</div>
          <div class="game-dead-banner" style="display: none">DEAD</div>
        </section>

        <section class="game-interaction-area" aria-label="Main action">
          <button class="game-interaction-btn game-interaction-btn-pass" aria-label="Pass turn to next player">
            PASS TURN
          </button>
          <button class="game-cancel-targeting-btn" style="display: none" aria-label="Cancel targeting">
            CANCEL
          </button>
        </section>

        <section class="game-other-players" aria-label="Other players">
          <div class="game-player-cards" role="list">
            <!-- Player cards will be inserted here dynamically -->
          </div>
        </section>

        <footer class="game-player-stats" aria-label="Your stats">
          <!-- Player name row (visible in waiting state) -->
          <div class="game-player-name-row">
            <span class="game-player-name-label">You:</span>
            <input
              type="text"
              class="game-player-name-edit"
              value="Player 1"
              maxlength="20"
              autocomplete="off"
              autocapitalize="words"
            />
          </div>
          <!-- Campaign stats row (hidden by default, shown for scoring campaigns) -->
          <div class="game-campaign-stats" style="display: none">
            <div class="game-campaign-stat" data-stat="level">
              <span class="game-campaign-stat-label">Lv</span>
              <span class="game-campaign-stat-value">1</span>
            </div>
            <div class="game-campaign-stat" data-stat="points">
              <span class="game-campaign-stat-label">Pts</span>
              <span class="game-campaign-stat-value">0</span>
            </div>
            <div class="game-campaign-stat" data-stat="multiplier">
              <span class="game-campaign-stat-label">Mult</span>
              <span class="game-campaign-stat-value">1.0x</span>
            </div>
            <div class="game-campaign-stat" data-stat="hand" style="display: none">
              <span class="game-campaign-stat-label">Hand</span>
              <span class="game-campaign-stat-value">5</span>
            </div>
            <div class="game-campaign-stat" data-stat="battle">
              <span class="game-campaign-stat-label">Battle</span>
              <span class="game-campaign-stat-value">1/3</span>
            </div>
          </div>
          <!-- Stats row -->
          <div class="game-stats-row">
            <div class="game-stat-group game-stat-life" role="group" aria-label="Life total">
              <div class="game-stat-header">
                <span class="game-stat-icon" aria-hidden="true">&#10084;</span>
                <span class="game-stat-value" aria-live="polite">20</span>
              </div>
              <div class="game-stat-controls">
                <button class="game-stat-btn" aria-label="Decrease life by 1">-</button>
                <button class="game-stat-btn" aria-label="Increase life by 1">+</button>
              </div>
            </div>
            <div class="game-stat-group game-stat-poison" role="group" aria-label="Drunk counter">
              <div class="game-stat-header">
                <span class="game-stat-icon" aria-hidden="true">&#127866;</span>
                <span class="game-stat-value" aria-live="polite">0</span>
              </div>
              <div class="game-stat-controls">
                <button class="game-stat-btn" aria-label="Decrease drunk counter">-</button>
                <button class="game-stat-btn" aria-label="Increase drunk counter">+</button>
              </div>
            </div>
            <div class="game-stat-group game-stat-generic" role="group" aria-label="Generic counter">
              <div class="game-stat-header">
                <span class="game-stat-icon" aria-hidden="true">&#11088;</span>
                <span class="game-stat-value" aria-live="polite">0</span>
              </div>
              <div class="game-stat-controls">
                <button class="game-stat-btn" aria-label="Decrease generic counter">-</button>
                <button class="game-stat-btn" aria-label="Increase generic counter">+</button>
              </div>
            </div>
          </div>
        </footer>
      </div>

      <!-- Settings Modal (Unified Tabbed) -->
      <div id="settings-modal" style="display: none" class="modal settings-modal">
        <div class="settings-content">
          <div class="settings-header">
            <h2>Settings</h2>
            <button class="settings-close" aria-label="Close">&times;</button>
          </div>

          <div class="settings-tabs" role="tablist" aria-label="Settings sections">
            <button class="settings-tab active" data-tab="controls" role="tab" aria-selected="true" aria-controls="panel-controls" id="tab-controls">Controls</button>
            <button class="settings-tab" data-tab="thresholds" role="tab" aria-selected="false" aria-controls="panel-thresholds" id="tab-thresholds">Thresholds</button>
            <button class="settings-tab" data-tab="more" role="tab" aria-selected="false" aria-controls="panel-more" id="tab-more">More</button>
            <button class="settings-tab" data-tab="admin" role="tab" aria-selected="false" aria-controls="panel-admin" id="tab-admin" style="display: none">Admin</button>
          </div>

          <!-- Controls Tab -->
          <div class="settings-panel active" data-panel="controls" role="tabpanel" id="panel-controls" aria-labelledby="tab-controls">
            <div class="settings-buttons">
              <button id="settings-pause-btn" class="settings-action-btn">
                <span class="action-icon">‚è∏</span>
                <span class="action-label">Pause</span>
              </button>
              <button id="settings-reset-btn" class="settings-action-btn settings-action-btn-secondary">
                <span class="action-icon">üîÑ</span>
                <span class="action-label">Reset</span>
              </button>
              <button id="settings-random-start-btn" class="settings-action-btn settings-action-btn-secondary" style="display: none">
                <span class="action-icon">üé≤</span>
                <span class="action-label">Random Start</span>
              </button>
            </div>

            <div class="settings-section">
              <label class="settings-label">Player Color</label>
              <div id="settings-color-picker" class="settings-color-grid">
                <!-- Colors populated by JS -->
              </div>
            </div>

            <div class="settings-section">
              <label class="settings-label" for="settings-bonus-time">Bonus Time Per Turn</label>
              <div class="settings-input-group">
                <input type="number" id="settings-bonus-time" class="settings-input" min="0" max="300" value="30" />
                <span class="settings-input-suffix">seconds</span>
              </div>
              <p class="settings-hint">Time added when a player's turn starts (0 to disable)</p>
            </div>
          </div>

          <!-- Thresholds Tab -->
          <div class="settings-panel" data-panel="thresholds" role="tabpanel" id="panel-thresholds" aria-labelledby="tab-thresholds" hidden>
            <div class="settings-section">
              <label class="settings-label">Warning Thresholds</label>
              <p class="settings-hint">Audio alerts at these times</p>
              <div id="settings-thresholds-container" class="settings-thresholds-list">
                <!-- Thresholds populated by JS -->
              </div>
              <button id="settings-add-threshold-btn" class="settings-add-btn">+ Add Threshold</button>
            </div>

            <div class="settings-section">
              <label class="settings-label">Timeout Penalty Options</label>
              <p class="settings-hint">When a player's timer runs out, they choose a penalty</p>
              <div class="timeout-penalty-settings">
                <div class="settings-input-group">
                  <label for="settings-timeout-lives">Lives Loss:</label>
                  <input type="number" id="settings-timeout-lives" class="settings-input settings-input-small" min="0" max="20" value="2" />
                </div>
                <div class="settings-input-group">
                  <label for="settings-timeout-drunk">Drunk Gain:</label>
                  <input type="number" id="settings-timeout-drunk" class="settings-input settings-input-small" min="0" max="20" value="2" />
                </div>
              </div>
            </div>

            <div class="settings-section">
              <label class="settings-label">Timeout Bonus Time</label>
              <p class="settings-hint">Time added after taking a timeout penalty</p>
              <div class="settings-input-group">
                <input type="number" id="settings-timeout-bonus-time" class="settings-input settings-input-small" min="0" max="300" value="60" />
                <span class="settings-unit">seconds</span>
              </div>
            </div>
          </div>

          <!-- More Tab -->
          <div class="settings-panel" data-panel="more" role="tabpanel" id="panel-more" aria-labelledby="tab-more" hidden>
            <div class="settings-section">
              <label class="settings-label">Game Code</label>
              <div class="settings-game-code" id="settings-game-code">ABC123</div>
            </div>

            <div class="settings-section">
              <label class="settings-label" for="settings-game-name-input">Game Name</label>
              <input
                type="text"
                id="settings-game-name-input"
                class="settings-input"
                placeholder="Enter game name"
                maxlength="50"
              />
            </div>

            <div class="settings-section settings-danger-zone">
              <label class="settings-label">Danger Zone</label>
              <button id="settings-close-lobby-btn" class="settings-danger-btn">Delete Lobby</button>
            </div>
          </div>

          <!-- Admin Tab (Owner Only) -->
          <div class="settings-panel" data-panel="admin" role="tabpanel" id="panel-admin" aria-labelledby="tab-admin" hidden>
            <p class="settings-hint settings-warning">Use these controls to correct mistakes during gameplay.</p>

            <div class="settings-section admin-section">
              <label class="settings-label">Player Management</label>
              <div class="admin-player-select">
                <label class="settings-hint" for="admin-player-dropdown">Select Player:</label>
                <select id="admin-player-dropdown" class="settings-input"></select>
              </div>

              <div class="admin-actions">
                <button id="admin-revive-btn" class="settings-action-btn settings-action-btn-secondary">
                  <span class="action-icon">üíö</span>
                  <span class="action-label">Revive</span>
                </button>
                <button id="admin-kick-btn" class="settings-action-btn settings-action-btn-danger">
                  <span class="action-icon">üö´</span>
                  <span class="action-label">Kick</span>
                </button>
              </div>
            </div>

            <div class="settings-section admin-section">
              <label class="settings-label">Add Time to Player</label>
              <div class="admin-time-controls">
                <input type="number" id="admin-time-input" class="settings-input" min="1" max="60" value="5" />
                <span class="settings-input-suffix">minutes</span>
                <button id="admin-add-time-btn" class="settings-action-btn settings-action-btn-secondary">
                  <span class="action-icon">‚è±Ô∏è</span>
                  <span class="action-label">Add</span>
                </button>
              </div>
            </div>
          </div>

          <div class="settings-footer">
            <button id="settings-save-btn" class="btn btn-primary">Save</button>
            <button id="settings-cancel-btn" class="btn btn-secondary">Cancel</button>
          </div>
        </div>
      </div>

      <div id="name-prompt-modal" style="display: none" class="modal">
        <div class="modal-content modal-small">
          <h3>Enter Your Name</h3>
          <input
            type="text"
            id="name-prompt-input"
            maxlength="20"
            autocapitalize="words"
            placeholder="Your name"
            class="name-input"
          />
          <input type="hidden" id="name-prompt-player-id" />
          <div class="modal-actions">
            <button id="name-prompt-confirm" class="btn btn-primary">Confirm</button>
            <button id="name-prompt-cancel" class="btn btn-secondary">Cancel</button>
          </div>
        </div>
      </div>

      <div id="color-picker-modal" style="display: none" class="modal">
        <div class="modal-content modal-small">
          <h3>Choose Color</h3>
          <div id="color-options" class="color-options"></div>
          <div class="modal-actions">
            <button id="cancel-color-picker" class="btn btn-secondary">Cancel</button>
          </div>
        </div>
      </div>

      <div id="timeout-modal" style="display: none" class="modal">
        <div class="modal-content modal-danger">
          <h2>TIMEOUT!</h2>
          <p id="timeout-message"></p>
          <button id="acknowledge-timeout" class="btn btn-primary" aria-label="Acknowledge timeout">
            Acknowledge
          </button>
        </div>
      </div>

      <!-- Timeout Choice Modal -->
      <div id="timeout-choice-modal" style="display: none" class="modal">
        <div class="modal-content modal-timeout-choice">
          <h2>TIME'S UP!</h2>
          <p class="timeout-choice-desc">Your timer has run out. Choose your penalty:</p>
          <div class="timeout-choice-countdown">
            <span>Auto-select in: </span>
            <span id="timeout-choice-timer" class="timeout-countdown-value">30</span>
            <span>s</span>
          </div>
          <div class="timeout-choice-options">
            <button id="timeout-choice-lives" class="btn timeout-choice-btn timeout-choice-lives">
              <span class="timeout-choice-icon">&#10084;</span>
              <span class="timeout-choice-label">Lose <span id="timeout-lives-amount">2</span> Life</span>
            </button>
            <button id="timeout-choice-drunk" class="btn timeout-choice-btn timeout-choice-drunk">
              <span class="timeout-choice-icon">&#127866;</span>
              <span class="timeout-choice-label">Gain <span id="timeout-drunk-amount">2</span> Drunk</span>
            </button>
            <button id="timeout-choice-die" class="btn timeout-choice-btn timeout-choice-die">
              <span class="timeout-choice-icon">&#128128;</span>
              <span class="timeout-choice-label">Accept Death</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Toast Notifications Container -->
      <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true"></div>

      <!-- Player Details Popup -->
      <div id="game-player-popup" class="game-player-popup" style="display: none">
        <div class="game-player-popup-content">
          <div class="game-player-popup-header">
            <span class="game-player-popup-name">Player Name</span>
            <button class="game-player-popup-close" aria-label="Close">&times;</button>
          </div>
          <div class="game-player-popup-body">
            <div class="game-player-popup-stat">
              <span class="game-player-popup-label">Time</span>
              <span class="game-player-popup-value game-player-popup-time">05:23</span>
            </div>
            <div class="game-player-popup-stat">
              <span class="game-player-popup-label">Life</span>
              <span class="game-player-popup-value game-player-popup-life">20</span>
            </div>
            <div class="game-player-popup-stat">
              <span class="game-player-popup-label">Drunk</span>
              <span class="game-player-popup-value game-player-popup-drunk">0</span>
            </div>
            <div class="game-player-popup-stat">
              <span class="game-player-popup-label">Counter</span>
              <span class="game-player-popup-value game-player-popup-generic">0</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Dice Rolling Modal -->
      <div id="dice-modal" class="modal" style="display: none" role="dialog" aria-labelledby="dice-modal-title" aria-modal="true">
        <div class="modal-content dice-modal-content">
          <h2 id="dice-modal-title">Roll Dice</h2>

          <div class="dice-selector">
            <label for="dice-sides-select">Number of sides</label>
            <select id="dice-sides-select" class="dice-select">
              <option value="2">D2 (Coin flip)</option>
              <option value="4">D4</option>
              <option value="6" selected>D6</option>
              <option value="8">D8</option>
              <option value="10">D10</option>
              <option value="12">D12</option>
              <option value="20">D20</option>
              <option value="custom">Custom...</option>
            </select>

            <div id="dice-custom-container" class="dice-custom-container" style="display: none">
              <label for="dice-custom-input">Enter number of sides</label>
              <input
                type="number"
                id="dice-custom-input"
                class="dice-custom-input"
                min="1"
                max="999"
                placeholder="1-999"
              >
              <span class="dice-custom-hint">Enter a value between 1 and 999</span>
            </div>
          </div>

          <div id="dice-last-result" class="dice-last-result" style="display: none">
            <span class="dice-result-label">Last roll:</span>
            <span id="dice-result-display" class="dice-result-display"></span>
          </div>

          <div class="modal-actions">
            <button id="roll-dice-btn" class="btn btn-primary dice-roll-btn">
              üé≤ Roll
            </button>
            <button id="close-dice-modal" class="btn btn-secondary">
              Close
            </button>
          </div>
        </div>
      </div>

      <!-- Campaign Info Modal -->
      <div id="campaign-info-modal" style="display: none" class="modal">
        <div class="modal-content campaign-info-modal-content">
          <h2 id="campaign-info-title">Campaign Info</h2>
          <p id="campaign-info-text" class="campaign-info-text"></p>
          <div class="modal-actions">
            <button id="campaign-info-close" class="btn btn-secondary">Close</button>
          </div>
        </div>
      </div>

      <!-- Dice Result Toast -->
      <div id="dice-toast" class="dice-toast" style="display: none" role="alert" aria-live="polite">
        <div class="dice-toast-content">
          <div class="dice-toast-header">
            <span class="dice-roller-name"></span>
            <span class="dice-roll-info">rolled a D<span class="dice-sides-display"></span></span>
          </div>
          <div class="dice-result-large"></div>
        </div>
      </div>
    </div>

    <script src="constants.js"></script>
    <script src="client.js"></script>
  </body>
</html>
